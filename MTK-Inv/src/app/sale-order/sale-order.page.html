<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Sale Order</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
<div  class="container-fluid" 
          style="background-color: rgb(235, 235, 235);">
          <div class="row">
            <!-- <div class="col">
              <h1>Add Product</h1>
              <hr>
            </div> -->
          </div>

          <!-- main form -->
          <div class="row">
            <form action=""  [formGroup]="regform">
              <div class="col">
        <!-- personal info -->

                <ion-item>
                  <ion-label >Sale Order Number</ion-label>
                  <ion-input interface="popover" formControlName="saleOrderNumber" >
                  </ion-input>
                  </ion-item>
                   <ion-item>
                  <div class="control-section" >
                  <div id='content' style="margin: 0px auto; width:300px; padding-top: 20px; margin-left: 0px;" >
                      <ejs-dropdownlist  id='Items' #samples [dataSource]='listOfCustomer'  [fields]='fields2' [popupHeight]='height' 
                      [placeholder]='watermark2'[headerTemplate]='headerTemplate' [itemTemplate]='itemTemplate' formControlName="customerName" >
                        <ng-template #headerTemplate >
                         <div class="head"> <span class="photo"> Fullname</span> <span class="photo" style="margin-left:17px;">Location</span><span class="photo" style="margin-left:17px;">Phone Number</span> </div>
                          </ng-template>
                            <ng-template #itemTemplate let-data ngFor let-code [ngForOf]="listOfCustomer" let-i="index" >
                              <div class="fullname"> {{code.fullname}} </div>
                                <div class="location"> {{code.location}}</div>
                                <div class="phonenumber"> {{code.phonenumber}} </div>
                             </ng-template>
                          <ng-template #valueTemplate let-data ngFor let-code [ngForOf]="listOfCustomer" let-i="index" >
                                 <div class="name"> {{code?.fullname}} </div>
                          </ng-template>
                        </ejs-dropdownlist>
                     </div>
              </div>  
                </ion-item>

                <ion-item>
                  <ion-label>Sale Order Date</ion-label>
                  <ion-input type="date" formControlName="date"></ion-input>
                </ion-item>
            <!-- address form portion -->
                <div class="row" formArrayName="lineItems">
                  <div class="col-12" *ngFor="let group of addLineItemsArray.controls; let i = index;" [formGroupName]="i">
                    <div class="row" >
                      <div class="col-12">
                        <div class="row">
                          <div class="col-4 control-buttons" >
                            <ion-button id="add items" (click)="addLineItems()"> 
                              <ion-icon slot="start" name="add-circle-outline"></ion-icon>Add Product</ion-button>
                          </div>
                          <div class="col-8 control-buttons">
                            <ion-button id="add items" (click)="removeLineOfItems(i)"> 
                              <ion-icon slot="start"name="remove-circle-outline"></ion-icon>Remove </ion-button>
                          </div>
                        </div>
                        </div>
                      <div class="control-section" >
                        <div id='content' style="margin: 0px auto; width:300px; padding-top: 40px; margin-left: 20px;" >
                            <ejs-dropdownlist  id='Items' #samples [dataSource]='listOfItems'  [fields]='fields' [popupHeight]='height' 
                            [placeholder]='watermark'[headerTemplate]='headerTemplate' [itemTemplate]='itemTemplate' formControlName="itemCode" >
                              <ng-template #headerTemplate >
                               <div class="head"> <span class="photo">Photo Items</span> <span style="margin-left:17px;">Item and description</span></div>
                                </ng-template>
                                  <ng-template #itemTemplate let-data ngFor let-code [ngForOf]="listOfItems" let-i="index" >
                                    <img class="empImage" [src]="code?.picture"/>
                                      <div class="ename"> {{code?.name}} </div>
                                      <div class="job"> {{code?.discrption}} </div>
                                     </ng-template>
                                <ng-template #valueTemplate let-data ngFor let-code [ngForOf]="listOfCustomer" let-i="index" >
                                    <div class="name"> {{code?.name}} </div>
                                </ng-template>
                              </ejs-dropdownlist>
                           </div>
                    </div>  
                      <div class="col-12">
                        <div class="row" ng-app="">
                          <div class="col">
                            <div class="form-group">
                              <label for="quantity">Qunatity</label>
                              <input type="number" formControlName="quantity" ng-model="qunatity" ng-init="qunatity=0" [ngClass]="{'form-control': true}"  placeholder="Enter Qunatity">
                            </div>
                          </div>
                          <div class="col">
                            <div class="form-group">
                              <label for="cost">Unit Price</label>
                              <input type="number" formControlName="cost" ng-model="cost" ng-init="cost=0" [ngClass]="{'form-control': true}"  placeholder="Enter unit price">
                            </div>
                          </div>
                           <div class="col">
                            <div class="form-group">
                              <label for="subTotal">Subtotal</label>
                              <input type="hidden" formControlName="subTotal" [ngClass]="{'form-control': true}" >
                              <!-- <p>{{calculateSubtotal() }} </p> -->
                            </div>
                          </div>
                        </div>
                  
                  </div>
                </div>
              </div>
            </div>
            <ion-item>
              <ion-label position="floating">Total Amount</ion-label>
              <ion-input  formControlName="totalAmount"></ion-input>
            </ion-item> 
           <div style="text-align: center; margin: auto;">
              <ion-button id="add items" (click)="saveSaleOrder()"> 
                <ion-icon slot="start" name="add-circle-outline"></ion-icon>
                Add Sale Order </ion-button>
            </div>
        <!-- seperator -->
        <div class="row">
          <div class="col">
            <hr>
          </div>
        </div>

        <!-- final action buttons 
        <div class="row justify-content-center">
          <div class="col-2">
            <button type="button" [disabled]="favFruitsError || nestedForm.invalid" (click)="submitHandler()" class="btn btn-primary">Submit</button>
          </div>
        </div>-->
      </div>
    </form>
  </div>
</div>
</ion-content>